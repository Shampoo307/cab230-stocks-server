{ "openapi":"3.0.0",
    "info":{ 
        "title":"CAB230 Server Side Docs",
        "description":"This is a simple Express API based on a Stocks database containing a selection of stock data from the American Stock Exchange.",
        "version":"1.0.0",
        "termsOfService":"http://swagger.io/terms/",
        "contact":{"email":"n9960783@qut.edu.au"},
        "license":{
            "name":"Apache 2.0",
            "url":"http://www.apache.org/licenses/LICENSE-2.0.html"
        } 
    },
    "servers":[ 
        {
            "url": "http://localhost:3001"
        }
    ],
    "basePath":"/stocks",
    "tags":[
        { 
          "name":"stocks",
          "description":"General API Description"
        }
    ],
    "paths":{ 
        "/stocks/symbols": {
            "get": {
                "tags": [
                    "Queries"
                ],
                "summary": "Returns all available stocks, optionally filtered by industry sector",
                "description": "",
                "produces": [
                    "application/json"
                ],
                "parameters": [
                    {
                        "in": "query",
                        "name": "industry",
                        "description": "Sector or part thereof e.g. Information or mation will match Information Technology",
                        "required": false
                    }
                ],
                "responses": {
                    "200": {
                        "description": "A JSON array of stock listing objects comprising name, symbol, and industry sector",
                        "produces": [
                            "application/json"
                        ],
                        "schema": {
                            "type": "object",
                            "properties": {
                                "Stocks": {
                                    "type": "array",
                                    "items": {
                                        "type": "object",
                                        "properties": {
                                            "name": {
                                                "type": "string"
                                            },
                                            "symbol": {
                                                "type": "string"
                                            },
                                            "industry": {
                                                "type": "string"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid query parameter: only 'industry' is permitted",
                        "produces": [
                            "application/json"
                        ],
                        "properties": {
                            "error": {
                                "type": "boolean"
                            },
                            "message": {
                                "type": "string"
                            }
                        }
                    },
                    "404": {
                        "description": "Industry sector not found",
                        "produces": [
                            "application/json"
                        ],
                        "properties": {
                            "error": {
                                "type": "boolean"
                            },
                            "message": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/stocks/{symbol}":{
            "get":{
                "tags":["Queries"],
                "summary":"Returns the latest entry for a particular stock searched by symbol (1-5 upper case letters)",
                "description":"",
                "produces":["application/json"],
                "parameters":[
                    {
                        "in":"path",
                        "name":"symbol",
                        "description":"The exchange symbol of the stock",
                        "required":true
                    }
                    ],
                "responses":{
                    "200":{
                        "description":"A stock object",
                        "produces":["application/json"],
                        "schema":{
                            "type": "object",
                            "properties": {
                                "items": {
                                    "type": "object",
                                    "properties": {
                                        "timestamp": {
                                            "type": "string"
                                        },
                                        "symbol": {
                                            "type": "string"
                                        },
                                        "name": {
                                            "type": "string"
                                        },
                                        "industry": {
                                            "type": "string"
                                        },
                                        "open": {
                                            "type": "number"
                                        },
                                        "high": {
                                            "type": "number"
                                        },
                                        "low": {
                                            "type": "number"
                                        },
                                        "close": {
                                            "type": "number"
                                        },
                                        "volumes": {
                                            "type": "number"
                                        }
                                    }
                                }

                            }
                        }
                    },
                    "400":{
                        "description":"Invalid query parameter(s)",
                        "produces":["application/json"],
                        "properties": {
                            "error": {
                                "type": "boolean"
                            },
                            "message": {
                                "type":"string"
                            }
                        }
                    },
                    "404":{
                        "description":"No entry for the symbol found in the stocks database",
                        "produces":["application/json"],
                        "properties": {
                            "error": {
                                "type": "boolean"
                            },
                            "message": {
                                "type":"string"
                            }
                        }
                    }
                }
            }
        },
        "/stocks/authed/{symbol}":{
            "get":{
                "tags":["Queries"],
                "summary":"Return entries of stock searched by symbol, optionally filtered by date",
                "description":"",
                "produces":["application/json"],
                "parameters":[
                    {
                        "in":"path",
                        "name":"symbol",
                        "description":"The exchange symbol of the stock",
                        "required":true,
                        "schema": {
                            "type": "object",
                            "properties": {
                                "Stocks": {
                                    "type": "array",
                                    "items": {
                                        "type": "object",
                                        "properties": {
                                            "name": {
                                                "type": "string"
                                            },
                                            "symbol": {
                                                "type": "string"
                                            },
                                            "industry": {
                                                "type": "string"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    {
                        "in":"query",
                        "name":"from",
                        "description":"Starting date of entries. Needs to be a string parsable for Date.Parse()",
                        "required":false
                    },
                    {
                        "in":"query",
                        "name":"to",
                        "description":"Finishing date of entries. Needs to be a string parsable for Date.Parse()",
                        "required":false
                    }],
                "responses": {
                    "200": {
                        "description": "One or more stock entries that meet the search criteria. By default, the response target will be a single object. If at least one valid to or from query is supplied with a valid date then the response will be an array of stock objects.",
                        "produces": [
                            "application/json"
                        ],
                        "schema": {
                            "type": "object",
                            "properties": {
                                "items": {
                                    "type": "object",
                                    "properties": {
                                        "timestamp": {
                                            "type": "string"
                                        },
                                        "symbol": {
                                            "type": "string"
                                        },
                                        "name": {
                                            "type": "string"
                                        },
                                        "industry": {
                                            "type": "string"
                                        },
                                        "open": {
                                            "type": "number"
                                        },
                                        "high": {
                                            "type": "number"
                                        },
                                        "low": {
                                            "type": "number"
                                        },
                                        "close": {
                                            "type": "number"
                                        },
                                        "volumes": {
                                            "type": "number"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid query parameter or date format",
                        "produces": [
                            "application/json"
                        ],
                        "properties": {
                            "error": {
                                "type": "boolean"
                            },
                            "message": {
                                "type": "string"
                            }
                        }
                    },
                    "403": {
                        "description": "Access denied",
                        "produces": [
                            "application/json"
                        ],
                        "properties": {
                            "error": {
                                "type": "boolean"
                            },
                            "message": {
                                "type": "string"
                            }
                        }
                    },
                    "404": {
                        "description": "Queried data not found",
                        "produces": [
                            "application/json"
                        ],
                        "properties": {
                            "error": {
                                "type": "boolean"
                            },
                            "message": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/user/register":{
            "post":{
                "tags":["Users"],
                "summary":"Create a new user account",
                "description":"",
                "consumes":["application/json"],
                "produces":["application/json"],
                "parameters":[
                    {
                        "description": "No parameters"
                    }],
                "requestBody": {
                    "description": "User object to be registered",
                    "consumes": ["application/json"],
                    "required": false,
                    "schema": {
                        "type": "object",
                        "properties": {
                            "email": {
                                "type": "string"
                            },
                            "password": {
                                "type": "string"
                            }
                        }
                    }
                },
                "201": {
                    "description": "User created",
                    "produces": [
                        "application/json"
                    ],
                    "properties": {
                        "success": {
                            "type": "boolean"
                        },
                        "message": {
                            "type": "string"
                        }
                    }
                },
                "400": {
                    "description": "Bad request",
                    "produces": [
                        "application/json"
                    ],
                    "properties": {
                        "error": {
                            "type": "boolean"
                        },
                        "message": {
                            "type": "string"
                        }
                    }
                },
                "409": {
                    "description": "User already exists",
                    "produces": [
                        "application/json"
                    ],
                    "properties": {
                        "error": {
                            "type": "boolean"
                        },
                        "message": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "/user/login":{
            "post":{
                "tags":["Users"],
                "summary":"Log in to an existing account",
                "description":"",
                "produces":["application/json"],
                "parameters":[
                    {
                        "description": "No parameters"
                    }],
                "requestBody": {
                    "description": "User object to log in",
                    "consumes": ["application/json"],
                    "required": true,
                    "schema": {
                        "type": "object",
                        "properties": {
                            "email": {
                                "type": "string"
                            },
                            "password": {
                                "type": "string"
                            }
                        }
                    }
                },
                "200": {
                    "description": "Log in successful",
                    "produces": [
                        "application/json"
                    ],
                    "properties": {
                        "token": {
                            "type": "boolean"
                        },
                        "token_type": {
                            "type": "string"
                        },
                        "expires": {
                            "type": "string"
                        }
                    }
                },
                "400": {
                    "description": "Invalid log in request",
                    "produces": [
                        "application/json"
                    ],
                    "properties": {
                        "error": {
                            "type": "boolean"
                        },
                        "message": {
                            "type": "string"
                        }
                    }
                },
                "401": {
                    "description": "Log in failed",
                    "produces": [
                        "application/json"
                    ],
                    "properties": {
                        "error": {
                            "type": "boolean"
                        },
                        "message": {
                            "type": "string"
                        }
                    }
                }
            }
        }
    }
}
                